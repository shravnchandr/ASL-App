/**
 * Material 3 Expressive Component System
 * Unified button, card, and status classes with spring physics
 */

/* ===== BUTTON SYSTEM ===== */

.m3-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-md) var(--spacing-xl);
  border: none;
  border-radius: var(--md-sys-shape-corner-large);
  font-family: var(--md-sys-typescale-font-family);
  font-size: var(--md-sys-typescale-label-large-size);
  font-weight: var(--md-sys-typescale-label-large-weight);
  line-height: var(--md-sys-typescale-label-large-line-height);
  cursor: pointer;
  text-decoration: none;
  white-space: nowrap;
  position: relative;
  overflow: hidden;
  transition:
    transform var(--duration-smooth) var(--spring-bounce),
    box-shadow var(--duration-smooth) var(--spring-smooth),
    background-color var(--duration-quick) ease,
    color var(--duration-quick) ease;
}

.m3-btn:hover:not(:disabled) {
  transform: translateY(-2px) scale(1.02);
}

.m3-btn:active:not(:disabled) {
  transform: translateY(0) scale(0.98);
  transition: all var(--duration-instant) var(--spring-gentle);
}

.m3-btn:disabled {
  opacity: 0.38;
  cursor: not-allowed;
  transform: none;
}

/* Filled Button (Primary) */
.m3-btn--filled {
  background: var(--gradient-ocean);
  background-size: 200% 100%;
  color: var(--md-sys-color-on-primary);
  box-shadow: var(--shadow-ocean);
}

.m3-btn--filled:hover:not(:disabled) {
  background-position: 100% 0;
  box-shadow:
    var(--shadow-ocean),
    0 12px 24px hsla(205, 87%, 45%, 0.25);
}

/* Outlined Button */
.m3-btn--outlined {
  background: transparent;
  color: var(--md-sys-color-primary);
  border: 2px solid var(--md-sys-color-outline);
}

.m3-btn--outlined:hover:not(:disabled) {
  background: var(--md-sys-color-primary-container);
  border-color: var(--md-sys-color-primary);
}

[data-theme="dark"] .m3-btn--outlined:hover:not(:disabled) {
  background: hsla(205, 90%, 70%, 0.1);
}

/* Tonal Button */
.m3-btn--tonal {
  background: var(--md-sys-color-secondary-container);
  color: var(--md-sys-color-on-secondary-container);
}

.m3-btn--tonal:hover:not(:disabled) {
  box-shadow: var(--shadow-teal);
}

/* Text Button */
.m3-btn--text {
  background: transparent;
  color: var(--md-sys-color-primary);
  padding: var(--spacing-sm) var(--spacing-md);
}

.m3-btn--text:hover:not(:disabled) {
  background: var(--md-sys-color-primary-container);
}

[data-theme="dark"] .m3-btn--text:hover:not(:disabled) {
  background: hsla(205, 90%, 70%, 0.1);
}

/* Size Modifiers */
.m3-btn--sm {
  padding: var(--spacing-sm) var(--spacing-md);
  font-size: var(--md-sys-typescale-label-medium-size);
  border-radius: var(--md-sys-shape-corner-medium);
}

.m3-btn--lg {
  padding: var(--spacing-lg) var(--spacing-2xl);
  font-size: var(--md-sys-typescale-title-medium-size);
  border-radius: var(--md-sys-shape-corner-extra-large);
}

/* Asymmetric Shape (M3E Expressive) */
.m3-btn--asymmetric {
  border-radius: var(--shape-asymmetric-1);
}

/* Icon Button */
.m3-btn--icon {
  width: 48px;
  height: 48px;
  padding: 0;
  border-radius: var(--md-sys-shape-corner-pill);
}

.m3-btn--icon.m3-btn--sm {
  width: 40px;
  height: 40px;
}

/* ===== CARD SYSTEM ===== */

.m3-card {
  background: var(--md-sys-color-surface);
  border-radius: var(--md-sys-shape-corner-extra-large);
  box-shadow: var(--md-sys-elevation-1);
  overflow: hidden;
  transition:
    transform var(--duration-smooth) var(--spring-bounce),
    box-shadow var(--duration-smooth) var(--spring-smooth);
}

.m3-card:hover {
  transform: translateY(-4px);
  box-shadow: var(--md-sys-elevation-3);
}

[data-theme="dark"] .m3-card {
  background: var(--md-sys-color-surface-container);
}

/* Elevated Card */
.m3-card--elevated {
  box-shadow: var(--md-sys-elevation-2);
}

.m3-card--elevated:hover {
  box-shadow: var(--md-sys-elevation-4);
}

/* Filled Card */
.m3-card--filled {
  background: var(--md-sys-color-surface-container-highest);
  box-shadow: none;
}

/* Outlined Card */
.m3-card--outlined {
  box-shadow: none;
  border: 1px solid var(--md-sys-color-outline-variant);
}

.m3-card--outlined:hover {
  border-color: var(--md-sys-color-outline);
  box-shadow: var(--md-sys-elevation-2);
}

/* Interactive Card */
.m3-card--interactive {
  cursor: pointer;
}

.m3-card--interactive:hover {
  transform: translateY(-8px) rotateX(2deg) rotateY(-2deg);
}

/* Asymmetric Shapes (M3E Expressive) */
.m3-card--asymmetric-1 {
  border-radius: var(--shape-asymmetric-2);
}

.m3-card--asymmetric-2 {
  border-radius: var(--shape-asymmetric-3);
}

.m3-card--asymmetric-3 {
  border-radius: var(--shape-card);
}

/* ===== STATUS FEEDBACK ===== */

.m3-status {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-md);
  border-radius: var(--md-sys-shape-corner-medium);
  font-weight: 500;
}

/* Success */
.m3-status--success {
  background: var(--md-sys-color-success-container);
  color: var(--md-sys-color-on-success-container);
}

/* Error */
.m3-status--error {
  background: var(--md-sys-color-error-container);
  color: var(--md-sys-color-on-error-container);
}

/* Warning */
.m3-status--warning {
  background: var(--md-sys-color-warning-container);
  color: var(--md-sys-color-on-warning-container);
}

/* Info (uses Primary) */
.m3-status--info {
  background: var(--md-sys-color-primary-container);
  color: var(--md-sys-color-on-primary-container);
}

/* ===== HERO MOMENT ANIMATIONS ===== */

@keyframes heroCorrect {
  0% {
    transform: scale(1);
  }
  25% {
    transform: scale(1.05);
  }
  50% {
    transform: scale(0.98);
  }
  75% {
    transform: scale(1.02);
  }
  100% {
    transform: scale(1);
  }
}

@keyframes heroCelebrate {
  0%, 100% {
    transform: scale(1) rotate(0deg);
  }
  25% {
    transform: scale(1.1) rotate(-3deg);
  }
  50% {
    transform: scale(1.05) rotate(3deg);
  }
  75% {
    transform: scale(1.08) rotate(-1deg);
  }
}

@keyframes shakeError {
  0%, 100% { transform: translateX(0); }
  20% { transform: translateX(-8px); }
  40% { transform: translateX(8px); }
  60% { transform: translateX(-4px); }
  80% { transform: translateX(4px); }
}

.m3-hero-correct {
  animation: heroCorrect var(--duration-slow) var(--spring-energetic);
}

.m3-hero-celebrate {
  animation: heroCelebrate var(--duration-slow) var(--spring-energetic);
}

.m3-shake-error {
  animation: shakeError 0.4s var(--spring-bounce);
}

/* ===== SLIDE ANIMATIONS ===== */

@keyframes slideDown {
  from {
    transform: translateY(-100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes slideUp {
  from {
    transform: translateY(20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes popIn {
  0% {
    transform: scale(0.8);
    opacity: 0;
  }
  60% {
    transform: scale(1.05);
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

.m3-slide-down {
  animation: slideDown var(--duration-smooth) var(--spring-bounce);
}

.m3-slide-up {
  animation: slideUp var(--duration-smooth) var(--spring-bounce);
}

.m3-pop-in {
  animation: popIn var(--duration-smooth) var(--spring-energetic);
}

/* ===== REDUCED MOTION ===== */

@media (prefers-reduced-motion: reduce) {
  .m3-btn,
  .m3-card {
    transition: none;
  }

  .m3-btn:hover:not(:disabled),
  .m3-btn:active:not(:disabled) {
    transform: none;
  }

  .m3-card:hover,
  .m3-card--interactive:hover {
    transform: none;
  }

  .m3-hero-correct,
  .m3-hero-celebrate,
  .m3-shake-error,
  .m3-slide-down,
  .m3-slide-up,
  .m3-pop-in {
    animation: none;
  }
}
